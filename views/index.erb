<div class="logs-view">
  <div class="row-fluid">
    <div class="selectblock "></div>
    <div class="logblock">
      <div id="loader"><img src='/images/ajax-loader.gif' /><p>One Sec...</p></div>
      <table class="table"><tbody id="log-table"></tbody></table>
    </div>
  </div>
</div>


<script type="text/template" id="tmplt-LogsSelect">
  <div class="row-fluid">
    <div class="form-group">
    <label for='log-select' class="control-label">Log Select</label>
      <select id="log-select" class="form-control">
      <%% collection.each(function(model) { %>
        <option value="<%%= model.get('filename') %>" ><%%= model.get('filename') %></option>
      <%% }) %>
      </select>
    </div>
  </div>

  <div class="row-fluid">
    <div class="form-group">
      <label for="log-search" class="control-label">Filter</label>
      <input id="log-search" class="form-control col-md-4" value="" placeholder="Filter String" />
        <p id="last-line-count"></p>
    </div>
  </div>

  <div class="row-fluid">
    <div class="form-group">
      <div class="checkbox">
        <label>
          <input type="checkbox" id="pause-refresh" value="true"> Pause Refresh
        </label>
      </div>
    </div>
  </div>
</script>


<script type="text/template" id="tmplt-LogLines">
  <%% var currentLine = LR.lastLineCount + 1 %>
  <%% var lineState = '' %>
    <table class="table table-striped">
    <%% _.each(log, function(line) { %>
      <%% if ((LR.lastLineCount - LR.newLineCount) < currentLine - 1) {
            lineState = 'success'
          } else {
            lineState = ''
          }
      %>
      <%% currentLine-- %>
      <tr class="<%%=lineState %>">
        <td><%%= currentLine %></td>
        <td><pre><%%= $.trim(line['line']) %></pre></td>
      </tr>
    <%% }) %>
    </table>
</script>

<script type="text/template" id="tmplt-LogLinePrepend">
  <%% var currentLine = LR.lastLineCount + 1 %>
  <%% var lineState = '' %>
  <%% var filter = LR.filterText %>
    <%% _.each(log, function(line) { %>
      <%% var lineFormatted = $.trim(line['line']) %>
      <%% lineFormatted = escapeHtml(lineFormatted) %>
      <%% if (filter) { %>
        <%% lineFormatted = lineFormatted.split(filter).join('<span class="highlight">' + filter + '</span>') %>
      <%% } %>
      <%% if ((LR.lastLineCount - LR.newLineCount) < currentLine - 1) {
            lineState = 'success'
          } else {
            lineState = ''
          }
      %>
      <%% currentLine-- %>
      <tr class="<%%=lineState %> <%%=line['match'] %> <%%=line['even_odd'] %>">
        <td><%%= currentLine %></td>
        <td><pre><%%= lineFormatted %></pre></td>
      </tr>
    <%% }) %>
</script>



